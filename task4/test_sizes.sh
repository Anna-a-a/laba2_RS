#!/bin/bash

echo "Тестирование производительности двумерных массивов с разными размерами"
echo "===================================================================="

# Размеры массивов для тестирования (СТРОКИxСТОЛБЦЫ)
sizes=("500x500" "1000x1000" "2000x2000")

# Количество потоков для тестирования
threads=(1 2 4 8)

for size in "${sizes[@]}"; do
    # Разбор размеров
    IFS='x' read -r ROWS COLS <<< "$size"
    echo -e "\nРазмер массива: ${ROWS}x${COLS}"
    echo "------------------------"
    
    # Запуск последовательной версии
    echo "Последовательная версия:"
    ./sequential_2d_arrays $ROWS $COLS
    
    # Запуск параллельной версии с разным количеством потоков
    for thread in "${threads[@]}"; do
        echo -e "\nПараллельная версия с $thread потоками:"
        export OMP_NUM_THREADS=$thread
        ./parallel_2d_arrays $thread $ROWS $COLS
    done
done 