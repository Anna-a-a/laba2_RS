# Лабораторная работа по параллельному программированию

## Описание проекта
Данный проект содержит реализацию четырех задач по параллельному программированию с использованием OpenMP. Каждая задача демонстрирует различные аспекты параллельной обработки данных.

## Структура проекта
```
.
├── task1/                 # Параллельное суммирование
│   ├── sequential_sum.c   # Последовательная версия
│   └── parallel_sum.c     # Параллельная версия
├── task2/                 # Параллельная сортировка
│   ├── sequential_qsort.c # Последовательная версия
│   └── parallel_qsort.c   # Параллельная версия
├── task3/                 # Параллельная обработка одномерных массивов
│   ├── sequential_arrays.c    # Последовательная версия
│   └── parallel_arrays.c      # Параллельная версия
└── task4/                 # Параллельная обработка двумерных массивов
    ├── c_2d.c             # Последовательная версия
    ├── p_2d.c             # Параллельная версия
    ├── test_threads.sh    # Скрипт тестирования с разным количеством потоков
    └── test_sizes.sh      # Скрипт тестирования с разными размерами массивов
```

## Задачи

### Задача 1: Параллельное суммирование
- Реализация параллельного суммирования элементов массива
- Использование директивы `#pragma omp parallel for reduction(+:sum)`
- Сравнение производительности последовательной и параллельной версий

### Задача 2: Параллельная сортировка
- Реализация параллельной версии алгоритма быстрой сортировки
- Параллельная обработка подмассивов
- Анализ эффективности параллелизации

### Задача 3: Параллельная обработка одномерных массивов
- Параллельное выполнение арифметических операций над массивами
- Оптимизация доступа к памяти
- Сравнение производительности при разных размерах данных

### Задача 4: Параллельная обработка двумерных массивов
- Параллельные операции над двумерными массивами
- Использование директивы `collapse(2)`
- Тестирование с различными размерами массивов и количеством потоков

## Требования
- Компилятор GCC с поддержкой OpenMP
- Операционная система: Linux/macOS
- Для запуска на суперкомпьютере: доступ к системе с поддержкой LSF

## Компиляция

### Локальная компиляция
```bash
# Для macOS
gcc -Xpreprocessor -fopenmp -I/opt/homebrew/opt/libomp/include -L/opt/homebrew/opt/libomp/lib -lomp -o program program.c

# Для Linux
gcc -fopenmp -o program program.c
```

### Компиляция на суперкомпьютере
```bash
gcc -fopenmp -o program program.c
```

## Запуск

### Локальный запуск
```bash
# Запуск последовательной версии
./program

# Запуск параллельной версии
export OMP_NUM_THREADS=4
./program
```

### Запуск на суперкомпьютере
1. Создайте файл job.sh:
```bash
#!/bin/bash
#BSUB -J task_name
#BSUB -n 8
#BSUB -W 00:30
#BSUB -o output_%J.out
#BSUB -e error_%J.err

cd $LS_SUBCWD
export OMP_NUM_THREADS=8
./program
```

2. Запустите задачу:
```bash
bsub < job.sh
```

## Тестирование

### Тестирование с разным количеством потоков
```bash
./test_threads.sh
```

### Тестирование с разными размерами данных
```bash
./test_sizes.sh
```

## Анализ результатов
Результаты выполнения программ сохраняются в файлах:
- `output_*.out` - вывод программы
- `error_*.err` - сообщения об ошибках

Для просмотра результатов:
```bash
cat output_*.out
```

## Примечания
- Для оптимальной производительности рекомендуется использовать 4-8 потоков
- Параллельная версия эффективна для массивов размером более 1000 элементов
- При работе с малыми массивами предпочтительнее использовать последовательную версию
